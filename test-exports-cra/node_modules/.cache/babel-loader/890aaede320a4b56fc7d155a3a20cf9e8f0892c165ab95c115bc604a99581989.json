{"ast":null,"code":"import { JsonGetValueTool, JsonListKeysTool } from \"../../../tools/json.js\";\nimport { JSON_PREFIX, JSON_SUFFIX } from \"./prompt.js\";\nimport { LLMChain } from \"../../../chains/llm_chain.js\";\nimport { ZeroShotAgent } from \"../../mrkl/index.js\";\nimport { Toolkit } from \"../base.js\";\nimport { AgentExecutor } from \"../../executor.js\";\nexport class JsonToolkit extends Toolkit {\n  constructor(jsonSpec) {\n    super();\n    Object.defineProperty(this, \"jsonSpec\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: jsonSpec\n    });\n    Object.defineProperty(this, \"tools\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    this.tools = [new JsonListKeysTool(jsonSpec), new JsonGetValueTool(jsonSpec)];\n  }\n}\nexport function createJsonAgent(llm, toolkit, args) {\n  const {\n    prefix = JSON_PREFIX,\n    suffix = JSON_SUFFIX,\n    inputVariables = [\"input\", \"agent_scratchpad\"]\n  } = args ?? {};\n  const {\n    tools\n  } = toolkit;\n  const prompt = ZeroShotAgent.createPrompt(tools, {\n    prefix,\n    suffix,\n    inputVariables\n  });\n  const chain = new LLMChain({\n    prompt,\n    llm\n  });\n  const agent = new ZeroShotAgent({\n    llmChain: chain,\n    allowedTools: tools.map(t => t.name)\n  });\n  return AgentExecutor.fromAgentAndTools({\n    agent,\n    tools,\n    returnIntermediateSteps: true\n  });\n}","map":{"version":3,"names":["JsonGetValueTool","JsonListKeysTool","JSON_PREFIX","JSON_SUFFIX","LLMChain","ZeroShotAgent","Toolkit","AgentExecutor","JsonToolkit","constructor","jsonSpec","Object","defineProperty","enumerable","configurable","writable","value","tools","createJsonAgent","llm","toolkit","args","prefix","suffix","inputVariables","prompt","createPrompt","chain","agent","llmChain","allowedTools","map","t","name","fromAgentAndTools","returnIntermediateSteps"],"sources":["/Users/b/Code/langchainjs/langchain/dist/agents/agent_toolkits/json/json.js"],"sourcesContent":["import { JsonGetValueTool, JsonListKeysTool, } from \"../../../tools/json.js\";\nimport { JSON_PREFIX, JSON_SUFFIX } from \"./prompt.js\";\nimport { LLMChain } from \"../../../chains/llm_chain.js\";\nimport { ZeroShotAgent } from \"../../mrkl/index.js\";\nimport { Toolkit } from \"../base.js\";\nimport { AgentExecutor } from \"../../executor.js\";\nexport class JsonToolkit extends Toolkit {\n    constructor(jsonSpec) {\n        super();\n        Object.defineProperty(this, \"jsonSpec\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: jsonSpec\n        });\n        Object.defineProperty(this, \"tools\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tools = [\n            new JsonListKeysTool(jsonSpec),\n            new JsonGetValueTool(jsonSpec),\n        ];\n    }\n}\nexport function createJsonAgent(llm, toolkit, args) {\n    const { prefix = JSON_PREFIX, suffix = JSON_SUFFIX, inputVariables = [\"input\", \"agent_scratchpad\"], } = args ?? {};\n    const { tools } = toolkit;\n    const prompt = ZeroShotAgent.createPrompt(tools, {\n        prefix,\n        suffix,\n        inputVariables,\n    });\n    const chain = new LLMChain({ prompt, llm });\n    const agent = new ZeroShotAgent({\n        llmChain: chain,\n        allowedTools: tools.map((t) => t.name),\n    });\n    return AgentExecutor.fromAgentAndTools({\n        agent,\n        tools,\n        returnIntermediateSteps: true,\n    });\n}\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,gBAAgB,QAAS,wBAAwB;AAC5E,SAASC,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,QAAQ,QAAQ,8BAA8B;AACvD,SAASC,aAAa,QAAQ,qBAAqB;AACnD,SAASC,OAAO,QAAQ,YAAY;AACpC,SAASC,aAAa,QAAQ,mBAAmB;AACjD,OAAO,MAAMC,WAAW,SAASF,OAAO,CAAC;EACrCG,WAAWA,CAACC,QAAQ,EAAE;IAClB,KAAK,EAAE;IACPC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,UAAU,EAAE;MACpCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAEN;IACX,CAAC,CAAC;IACFC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,OAAO,EAAE;MACjCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE,KAAK;IAChB,CAAC,CAAC;IACF,IAAI,CAACC,KAAK,GAAG,CACT,IAAIhB,gBAAgB,CAACS,QAAQ,CAAC,EAC9B,IAAIV,gBAAgB,CAACU,QAAQ,CAAC,CACjC;EACL;AACJ;AACA,OAAO,SAASQ,eAAeA,CAACC,GAAG,EAAEC,OAAO,EAAEC,IAAI,EAAE;EAChD,MAAM;IAAEC,MAAM,GAAGpB,WAAW;IAAEqB,MAAM,GAAGpB,WAAW;IAAEqB,cAAc,GAAG,CAAC,OAAO,EAAE,kBAAkB;EAAG,CAAC,GAAGH,IAAI,IAAI,CAAC,CAAC;EAClH,MAAM;IAAEJ;EAAM,CAAC,GAAGG,OAAO;EACzB,MAAMK,MAAM,GAAGpB,aAAa,CAACqB,YAAY,CAACT,KAAK,EAAE;IAC7CK,MAAM;IACNC,MAAM;IACNC;EACJ,CAAC,CAAC;EACF,MAAMG,KAAK,GAAG,IAAIvB,QAAQ,CAAC;IAAEqB,MAAM;IAAEN;EAAI,CAAC,CAAC;EAC3C,MAAMS,KAAK,GAAG,IAAIvB,aAAa,CAAC;IAC5BwB,QAAQ,EAAEF,KAAK;IACfG,YAAY,EAAEb,KAAK,CAACc,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI;EACzC,CAAC,CAAC;EACF,OAAO1B,aAAa,CAAC2B,iBAAiB,CAAC;IACnCN,KAAK;IACLX,KAAK;IACLkB,uBAAuB,EAAE;EAC7B,CAAC,CAAC;AACN"},"metadata":{},"sourceType":"module","externalDependencies":[]}