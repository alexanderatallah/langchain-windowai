{"ast":null,"code":"import { DynamicTool } from \"../../../tools/dynamic.js\";\nimport { AgentExecutor } from \"../../executor.js\";\nimport { OPENAPI_PREFIX, OPENAPI_SUFFIX, JSON_EXPLORER_DESCRIPTION } from \"./prompt.js\";\nimport { LLMChain } from \"../../../chains/llm_chain.js\";\nimport { ZeroShotAgent } from \"../../mrkl/index.js\";\nimport { Toolkit } from \"../base.js\";\nimport { RequestsGetTool, RequestsPostTool } from \"../../../tools/requests.js\";\nimport { createJsonAgent, JsonToolkit } from \"../json/json.js\";\nexport class RequestsToolkit extends Toolkit {\n  constructor(headers) {\n    super();\n    Object.defineProperty(this, \"tools\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    this.tools = [new RequestsGetTool(headers), new RequestsPostTool(headers)];\n  }\n}\nexport class OpenApiToolkit extends RequestsToolkit {\n  constructor(jsonSpec, llm, headers) {\n    super(headers);\n    const jsonAgent = createJsonAgent(llm, new JsonToolkit(jsonSpec));\n    this.tools = [...this.tools, new DynamicTool({\n      name: \"json_explorer\",\n      func: async input => {\n        const result = await jsonAgent.call({\n          input\n        });\n        return result.output;\n      },\n      description: JSON_EXPLORER_DESCRIPTION\n    })];\n  }\n}\nexport function createOpenApiAgent(llm, openApiToolkit, args) {\n  const {\n    prefix = OPENAPI_PREFIX,\n    suffix = OPENAPI_SUFFIX,\n    inputVariables = [\"input\", \"agent_scratchpad\"]\n  } = args ?? {};\n  const {\n    tools\n  } = openApiToolkit;\n  const prompt = ZeroShotAgent.createPrompt(tools, {\n    prefix,\n    suffix,\n    inputVariables\n  });\n  const chain = new LLMChain({\n    prompt,\n    llm\n  });\n  const toolNames = tools.map(tool => tool.name);\n  const agent = new ZeroShotAgent({\n    llmChain: chain,\n    allowedTools: toolNames\n  });\n  return AgentExecutor.fromAgentAndTools({\n    agent,\n    tools,\n    returnIntermediateSteps: true\n  });\n}","map":{"version":3,"names":["DynamicTool","AgentExecutor","OPENAPI_PREFIX","OPENAPI_SUFFIX","JSON_EXPLORER_DESCRIPTION","LLMChain","ZeroShotAgent","Toolkit","RequestsGetTool","RequestsPostTool","createJsonAgent","JsonToolkit","RequestsToolkit","constructor","headers","Object","defineProperty","enumerable","configurable","writable","value","tools","OpenApiToolkit","jsonSpec","llm","jsonAgent","name","func","input","result","call","output","description","createOpenApiAgent","openApiToolkit","args","prefix","suffix","inputVariables","prompt","createPrompt","chain","toolNames","map","tool","agent","llmChain","allowedTools","fromAgentAndTools","returnIntermediateSteps"],"sources":["/Users/b/Code/langchainjs/langchain/dist/agents/agent_toolkits/openapi/openapi.js"],"sourcesContent":["import { DynamicTool } from \"../../../tools/dynamic.js\";\nimport { AgentExecutor } from \"../../executor.js\";\nimport { OPENAPI_PREFIX, OPENAPI_SUFFIX, JSON_EXPLORER_DESCRIPTION, } from \"./prompt.js\";\nimport { LLMChain } from \"../../../chains/llm_chain.js\";\nimport { ZeroShotAgent } from \"../../mrkl/index.js\";\nimport { Toolkit } from \"../base.js\";\nimport { RequestsGetTool, RequestsPostTool, } from \"../../../tools/requests.js\";\nimport { createJsonAgent, JsonToolkit } from \"../json/json.js\";\nexport class RequestsToolkit extends Toolkit {\n    constructor(headers) {\n        super();\n        Object.defineProperty(this, \"tools\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.tools = [new RequestsGetTool(headers), new RequestsPostTool(headers)];\n    }\n}\nexport class OpenApiToolkit extends RequestsToolkit {\n    constructor(jsonSpec, llm, headers) {\n        super(headers);\n        const jsonAgent = createJsonAgent(llm, new JsonToolkit(jsonSpec));\n        this.tools = [\n            ...this.tools,\n            new DynamicTool({\n                name: \"json_explorer\",\n                func: async (input) => {\n                    const result = await jsonAgent.call({ input });\n                    return result.output;\n                },\n                description: JSON_EXPLORER_DESCRIPTION,\n            }),\n        ];\n    }\n}\nexport function createOpenApiAgent(llm, openApiToolkit, args) {\n    const { prefix = OPENAPI_PREFIX, suffix = OPENAPI_SUFFIX, inputVariables = [\"input\", \"agent_scratchpad\"], } = args ?? {};\n    const { tools } = openApiToolkit;\n    const prompt = ZeroShotAgent.createPrompt(tools, {\n        prefix,\n        suffix,\n        inputVariables,\n    });\n    const chain = new LLMChain({\n        prompt,\n        llm,\n    });\n    const toolNames = tools.map((tool) => tool.name);\n    const agent = new ZeroShotAgent({ llmChain: chain, allowedTools: toolNames });\n    return AgentExecutor.fromAgentAndTools({\n        agent,\n        tools,\n        returnIntermediateSteps: true,\n    });\n}\n"],"mappings":"AAAA,SAASA,WAAW,QAAQ,2BAA2B;AACvD,SAASC,aAAa,QAAQ,mBAAmB;AACjD,SAASC,cAAc,EAAEC,cAAc,EAAEC,yBAAyB,QAAS,aAAa;AACxF,SAASC,QAAQ,QAAQ,8BAA8B;AACvD,SAASC,aAAa,QAAQ,qBAAqB;AACnD,SAASC,OAAO,QAAQ,YAAY;AACpC,SAASC,eAAe,EAAEC,gBAAgB,QAAS,4BAA4B;AAC/E,SAASC,eAAe,EAAEC,WAAW,QAAQ,iBAAiB;AAC9D,OAAO,MAAMC,eAAe,SAASL,OAAO,CAAC;EACzCM,WAAWA,CAACC,OAAO,EAAE;IACjB,KAAK,EAAE;IACPC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,OAAO,EAAE;MACjCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE,KAAK;IAChB,CAAC,CAAC;IACF,IAAI,CAACC,KAAK,GAAG,CAAC,IAAIb,eAAe,CAACM,OAAO,CAAC,EAAE,IAAIL,gBAAgB,CAACK,OAAO,CAAC,CAAC;EAC9E;AACJ;AACA,OAAO,MAAMQ,cAAc,SAASV,eAAe,CAAC;EAChDC,WAAWA,CAACU,QAAQ,EAAEC,GAAG,EAAEV,OAAO,EAAE;IAChC,KAAK,CAACA,OAAO,CAAC;IACd,MAAMW,SAAS,GAAGf,eAAe,CAACc,GAAG,EAAE,IAAIb,WAAW,CAACY,QAAQ,CAAC,CAAC;IACjE,IAAI,CAACF,KAAK,GAAG,CACT,GAAG,IAAI,CAACA,KAAK,EACb,IAAIrB,WAAW,CAAC;MACZ0B,IAAI,EAAE,eAAe;MACrBC,IAAI,EAAE,MAAOC,KAAK,IAAK;QACnB,MAAMC,MAAM,GAAG,MAAMJ,SAAS,CAACK,IAAI,CAAC;UAAEF;QAAM,CAAC,CAAC;QAC9C,OAAOC,MAAM,CAACE,MAAM;MACxB,CAAC;MACDC,WAAW,EAAE5B;IACjB,CAAC,CAAC,CACL;EACL;AACJ;AACA,OAAO,SAAS6B,kBAAkBA,CAACT,GAAG,EAAEU,cAAc,EAAEC,IAAI,EAAE;EAC1D,MAAM;IAAEC,MAAM,GAAGlC,cAAc;IAAEmC,MAAM,GAAGlC,cAAc;IAAEmC,cAAc,GAAG,CAAC,OAAO,EAAE,kBAAkB;EAAG,CAAC,GAAGH,IAAI,IAAI,CAAC,CAAC;EACxH,MAAM;IAAEd;EAAM,CAAC,GAAGa,cAAc;EAChC,MAAMK,MAAM,GAAGjC,aAAa,CAACkC,YAAY,CAACnB,KAAK,EAAE;IAC7Ce,MAAM;IACNC,MAAM;IACNC;EACJ,CAAC,CAAC;EACF,MAAMG,KAAK,GAAG,IAAIpC,QAAQ,CAAC;IACvBkC,MAAM;IACNf;EACJ,CAAC,CAAC;EACF,MAAMkB,SAAS,GAAGrB,KAAK,CAACsB,GAAG,CAAEC,IAAI,IAAKA,IAAI,CAAClB,IAAI,CAAC;EAChD,MAAMmB,KAAK,GAAG,IAAIvC,aAAa,CAAC;IAAEwC,QAAQ,EAAEL,KAAK;IAAEM,YAAY,EAAEL;EAAU,CAAC,CAAC;EAC7E,OAAOzC,aAAa,CAAC+C,iBAAiB,CAAC;IACnCH,KAAK;IACLxB,KAAK;IACL4B,uBAAuB,EAAE;EAC7B,CAAC,CAAC;AACN"},"metadata":{},"sourceType":"module","externalDependencies":[]}