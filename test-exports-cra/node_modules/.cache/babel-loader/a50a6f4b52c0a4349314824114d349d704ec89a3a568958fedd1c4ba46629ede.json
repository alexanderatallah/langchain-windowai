{"ast":null,"code":"import { HumanChatMessage, AIChatMessage, BaseChatMessageHistory } from \"../schema/index.js\";\nimport { BaseMemory, getInputValue } from \"./base.js\";\nexport class ChatMessageHistory extends BaseChatMessageHistory {\n  constructor(messages) {\n    super();\n    Object.defineProperty(this, \"messages\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    this.messages = messages ?? [];\n  }\n  addUserMessage(message) {\n    this.messages.push(new HumanChatMessage(message));\n  }\n  addAIChatMessage(message) {\n    this.messages.push(new AIChatMessage(message));\n  }\n}\nexport class BaseChatMemory extends BaseMemory {\n  constructor(fields) {\n    super();\n    Object.defineProperty(this, \"chatHistory\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"returnMessages\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(this, \"inputKey\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"outputKey\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    this.chatHistory = fields?.chatHistory ?? new ChatMessageHistory();\n    this.returnMessages = fields?.returnMessages ?? this.returnMessages;\n    this.inputKey = fields?.inputKey ?? this.inputKey;\n    this.outputKey = fields?.outputKey ?? this.outputKey;\n  }\n  async saveContext(inputValues, outputValues) {\n    this.chatHistory.addUserMessage(getInputValue(inputValues, this.inputKey));\n    this.chatHistory.addAIChatMessage(getInputValue(outputValues, this.outputKey));\n  }\n}","map":{"version":3,"names":["HumanChatMessage","AIChatMessage","BaseChatMessageHistory","BaseMemory","getInputValue","ChatMessageHistory","constructor","messages","Object","defineProperty","enumerable","configurable","writable","value","addUserMessage","message","push","addAIChatMessage","BaseChatMemory","fields","chatHistory","returnMessages","inputKey","outputKey","saveContext","inputValues","outputValues"],"sources":["/Users/b/Code/langchainjs/langchain/dist/memory/chat_memory.js"],"sourcesContent":["import { HumanChatMessage, AIChatMessage, BaseChatMessageHistory, } from \"../schema/index.js\";\nimport { BaseMemory, getInputValue, } from \"./base.js\";\nexport class ChatMessageHistory extends BaseChatMessageHistory {\n    constructor(messages) {\n        super();\n        Object.defineProperty(this, \"messages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: []\n        });\n        this.messages = messages ?? [];\n    }\n    addUserMessage(message) {\n        this.messages.push(new HumanChatMessage(message));\n    }\n    addAIChatMessage(message) {\n        this.messages.push(new AIChatMessage(message));\n    }\n}\nexport class BaseChatMemory extends BaseMemory {\n    constructor(fields) {\n        super();\n        Object.defineProperty(this, \"chatHistory\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"returnMessages\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: false\n        });\n        Object.defineProperty(this, \"inputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"outputKey\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.chatHistory = fields?.chatHistory ?? new ChatMessageHistory();\n        this.returnMessages = fields?.returnMessages ?? this.returnMessages;\n        this.inputKey = fields?.inputKey ?? this.inputKey;\n        this.outputKey = fields?.outputKey ?? this.outputKey;\n    }\n    async saveContext(inputValues, outputValues) {\n        this.chatHistory.addUserMessage(getInputValue(inputValues, this.inputKey));\n        this.chatHistory.addAIChatMessage(getInputValue(outputValues, this.outputKey));\n    }\n}\n"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,aAAa,EAAEC,sBAAsB,QAAS,oBAAoB;AAC7F,SAASC,UAAU,EAAEC,aAAa,QAAS,WAAW;AACtD,OAAO,MAAMC,kBAAkB,SAASH,sBAAsB,CAAC;EAC3DI,WAAWA,CAACC,QAAQ,EAAE;IAClB,KAAK,EAAE;IACPC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,UAAU,EAAE;MACpCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE;IACX,CAAC,CAAC;IACF,IAAI,CAACN,QAAQ,GAAGA,QAAQ,IAAI,EAAE;EAClC;EACAO,cAAcA,CAACC,OAAO,EAAE;IACpB,IAAI,CAACR,QAAQ,CAACS,IAAI,CAAC,IAAIhB,gBAAgB,CAACe,OAAO,CAAC,CAAC;EACrD;EACAE,gBAAgBA,CAACF,OAAO,EAAE;IACtB,IAAI,CAACR,QAAQ,CAACS,IAAI,CAAC,IAAIf,aAAa,CAACc,OAAO,CAAC,CAAC;EAClD;AACJ;AACA,OAAO,MAAMG,cAAc,SAASf,UAAU,CAAC;EAC3CG,WAAWA,CAACa,MAAM,EAAE;IAChB,KAAK,EAAE;IACPX,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,aAAa,EAAE;MACvCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE,KAAK;IAChB,CAAC,CAAC;IACFL,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,gBAAgB,EAAE;MAC1CC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE;IACX,CAAC,CAAC;IACFL,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,UAAU,EAAE;MACpCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE,KAAK;IAChB,CAAC,CAAC;IACFL,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,WAAW,EAAE;MACrCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE,KAAK;IAChB,CAAC,CAAC;IACF,IAAI,CAACO,WAAW,GAAGD,MAAM,EAAEC,WAAW,IAAI,IAAIf,kBAAkB,EAAE;IAClE,IAAI,CAACgB,cAAc,GAAGF,MAAM,EAAEE,cAAc,IAAI,IAAI,CAACA,cAAc;IACnE,IAAI,CAACC,QAAQ,GAAGH,MAAM,EAAEG,QAAQ,IAAI,IAAI,CAACA,QAAQ;IACjD,IAAI,CAACC,SAAS,GAAGJ,MAAM,EAAEI,SAAS,IAAI,IAAI,CAACA,SAAS;EACxD;EACA,MAAMC,WAAWA,CAACC,WAAW,EAAEC,YAAY,EAAE;IACzC,IAAI,CAACN,WAAW,CAACN,cAAc,CAACV,aAAa,CAACqB,WAAW,EAAE,IAAI,CAACH,QAAQ,CAAC,CAAC;IAC1E,IAAI,CAACF,WAAW,CAACH,gBAAgB,CAACb,aAAa,CAACsB,YAAY,EAAE,IAAI,CAACH,SAAS,CAAC,CAAC;EAClF;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}