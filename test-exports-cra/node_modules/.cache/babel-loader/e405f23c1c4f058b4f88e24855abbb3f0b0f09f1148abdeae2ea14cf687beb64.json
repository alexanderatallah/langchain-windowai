{"ast":null,"code":"import { Document } from \"../../document.js\";\nimport { RemoteRetriever } from \"./base.js\";\nexport class ChatGPTPluginRetriever extends RemoteRetriever {\n  constructor(_ref) {\n    let {\n      topK = 4,\n      filter,\n      ...rest\n    } = _ref;\n    super(rest);\n    Object.defineProperty(this, \"topK\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"filter\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    this.topK = topK;\n    this.filter = filter;\n  }\n  createJsonBody(query) {\n    return {\n      queries: [{\n        query,\n        top_k: this.topK,\n        filter: this.filter\n      }]\n    };\n  }\n  processJsonResponse(json) {\n    const results = json?.results?.[0]?.results;\n    if (!results) {\n      // Note an empty array of results would not fall into this case\n      throw new Error(\"No results returned from ChatGPTPluginRetriever\");\n    }\n    return results.map(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    result => new Document({\n      pageContent: result.text,\n      metadata: result.metadata\n    }));\n  }\n}","map":{"version":3,"names":["Document","RemoteRetriever","ChatGPTPluginRetriever","constructor","_ref","topK","filter","rest","Object","defineProperty","enumerable","configurable","writable","value","createJsonBody","query","queries","top_k","processJsonResponse","json","results","Error","map","result","pageContent","text","metadata"],"sources":["/Users/b/Code/langchainjs/langchain/dist/retrievers/remote/chatgpt-plugin.js"],"sourcesContent":["import { Document } from \"../../document.js\";\nimport { RemoteRetriever, } from \"./base.js\";\nexport class ChatGPTPluginRetriever extends RemoteRetriever {\n    constructor({ topK = 4, filter, ...rest }) {\n        super(rest);\n        Object.defineProperty(this, \"topK\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"filter\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.topK = topK;\n        this.filter = filter;\n    }\n    createJsonBody(query) {\n        return {\n            queries: [\n                {\n                    query,\n                    top_k: this.topK,\n                    filter: this.filter,\n                },\n            ],\n        };\n    }\n    processJsonResponse(json) {\n        const results = json?.results?.[0]?.results;\n        if (!results) {\n            // Note an empty array of results would not fall into this case\n            throw new Error(\"No results returned from ChatGPTPluginRetriever\");\n        }\n        return results.map(\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        (result) => new Document({\n            pageContent: result.text,\n            metadata: result.metadata,\n        }));\n    }\n}\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,mBAAmB;AAC5C,SAASC,eAAe,QAAS,WAAW;AAC5C,OAAO,MAAMC,sBAAsB,SAASD,eAAe,CAAC;EACxDE,WAAWA,CAAAC,IAAA,EAAgC;IAAA,IAA/B;MAAEC,IAAI,GAAG,CAAC;MAAEC,MAAM;MAAE,GAAGC;IAAK,CAAC,GAAAH,IAAA;IACrC,KAAK,CAACG,IAAI,CAAC;IACXC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,MAAM,EAAE;MAChCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE,KAAK;IAChB,CAAC,CAAC;IACFL,MAAM,CAACC,cAAc,CAAC,IAAI,EAAE,QAAQ,EAAE;MAClCC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,IAAI;MAClBC,QAAQ,EAAE,IAAI;MACdC,KAAK,EAAE,KAAK;IAChB,CAAC,CAAC;IACF,IAAI,CAACR,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACC,MAAM,GAAGA,MAAM;EACxB;EACAQ,cAAcA,CAACC,KAAK,EAAE;IAClB,OAAO;MACHC,OAAO,EAAE,CACL;QACID,KAAK;QACLE,KAAK,EAAE,IAAI,CAACZ,IAAI;QAChBC,MAAM,EAAE,IAAI,CAACA;MACjB,CAAC;IAET,CAAC;EACL;EACAY,mBAAmBA,CAACC,IAAI,EAAE;IACtB,MAAMC,OAAO,GAAGD,IAAI,EAAEC,OAAO,GAAG,CAAC,CAAC,EAAEA,OAAO;IAC3C,IAAI,CAACA,OAAO,EAAE;MACV;MACA,MAAM,IAAIC,KAAK,CAAC,iDAAiD,CAAC;IACtE;IACA,OAAOD,OAAO,CAACE,GAAG;IAClB;IACCC,MAAM,IAAK,IAAIvB,QAAQ,CAAC;MACrBwB,WAAW,EAAED,MAAM,CAACE,IAAI;MACxBC,QAAQ,EAAEH,MAAM,CAACG;IACrB,CAAC,CAAC,CAAC;EACP;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}