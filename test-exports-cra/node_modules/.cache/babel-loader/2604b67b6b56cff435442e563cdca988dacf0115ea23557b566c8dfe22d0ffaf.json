{"ast":null,"code":"import { BaseRetriever } from \"../schema/index.js\";\nexport class VectorStoreRetriever extends BaseRetriever {\n  constructor(fields) {\n    super();\n    Object.defineProperty(this, \"vectorStore\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"k\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: 4\n    });\n    this.vectorStore = fields.vectorStore;\n    this.k = fields.k ?? this.k;\n  }\n  async getRelevantDocuments(query) {\n    const results = await this.vectorStore.similaritySearch(query, this.k);\n    return results;\n  }\n}\nexport class VectorStore {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  constructor(embeddings, _dbConfig) {\n    Object.defineProperty(this, \"embeddings\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    this.embeddings = embeddings;\n  }\n  async similaritySearch(query) {\n    let k = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 4;\n    let filter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n    const results = await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(query), k, filter);\n    return results.map(result => result[0]);\n  }\n  async similaritySearchWithScore(query) {\n    let k = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 4;\n    let filter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n    return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(query), k, filter);\n  }\n  static fromTexts(_texts, _metadatas, _embeddings,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _dbConfig) {\n    throw new Error(\"the Langchain vectorstore implementation you are using forgot to override this, please report a bug\");\n  }\n  static fromDocuments(_docs, _embeddings,\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _dbConfig) {\n    throw new Error(\"the Langchain vectorstore implementation you are using forgot to override this, please report a bug\");\n  }\n  asRetriever(k) {\n    return new VectorStoreRetriever({\n      vectorStore: this,\n      k\n    });\n  }\n}\nexport class SaveableVectorStore extends VectorStore {\n  static load(_directory, _embeddings) {\n    throw new Error(\"Not implemented\");\n  }\n}","map":{"version":3,"names":["BaseRetriever","VectorStoreRetriever","constructor","fields","Object","defineProperty","enumerable","configurable","writable","value","vectorStore","k","getRelevantDocuments","query","results","similaritySearch","VectorStore","embeddings","_dbConfig","arguments","length","undefined","filter","similaritySearchVectorWithScore","embedQuery","map","result","similaritySearchWithScore","fromTexts","_texts","_metadatas","_embeddings","Error","fromDocuments","_docs","asRetriever","SaveableVectorStore","load","_directory"],"sources":["/Users/b/Code/langchainjs/test-exports-cra/node_modules/langchain/dist/vectorstores/base.js"],"sourcesContent":["import { BaseRetriever } from \"../schema/index.js\";\nexport class VectorStoreRetriever extends BaseRetriever {\n    constructor(fields) {\n        super();\n        Object.defineProperty(this, \"vectorStore\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        Object.defineProperty(this, \"k\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: 4\n        });\n        this.vectorStore = fields.vectorStore;\n        this.k = fields.k ?? this.k;\n    }\n    async getRelevantDocuments(query) {\n        const results = await this.vectorStore.similaritySearch(query, this.k);\n        return results;\n    }\n}\nexport class VectorStore {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(embeddings, _dbConfig) {\n        Object.defineProperty(this, \"embeddings\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.embeddings = embeddings;\n    }\n    async similaritySearch(query, k = 4, filter = undefined) {\n        const results = await this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(query), k, filter);\n        return results.map((result) => result[0]);\n    }\n    async similaritySearchWithScore(query, k = 4, filter = undefined) {\n        return this.similaritySearchVectorWithScore(await this.embeddings.embedQuery(query), k, filter);\n    }\n    static fromTexts(_texts, _metadatas, _embeddings, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _dbConfig) {\n        throw new Error(\"the Langchain vectorstore implementation you are using forgot to override this, please report a bug\");\n    }\n    static fromDocuments(_docs, _embeddings, \n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    _dbConfig) {\n        throw new Error(\"the Langchain vectorstore implementation you are using forgot to override this, please report a bug\");\n    }\n    asRetriever(k) {\n        return new VectorStoreRetriever({ vectorStore: this, k });\n    }\n}\nexport class SaveableVectorStore extends VectorStore {\n    static load(_directory, _embeddings) {\n        throw new Error(\"Not implemented\");\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}