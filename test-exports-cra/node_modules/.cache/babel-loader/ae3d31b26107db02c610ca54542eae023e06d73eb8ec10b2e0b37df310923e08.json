{"ast":null,"code":"import { LLMChain } from \"../llm_chain.js\";\nimport { StuffDocumentsChain, MapReduceDocumentsChain } from \"../combine_docs_chain.js\";\nimport { QA_PROMPT_SELECTOR, DEFAULT_QA_PROMPT } from \"./stuff_prompts.js\";\nimport { COMBINE_PROMPT, DEFAULT_COMBINE_QA_PROMPT, COMBINE_PROMPT_SELECTOR, COMBINE_QA_PROMPT_SELECTOR } from \"./map_reduce_prompts.js\";\nexport const loadQAChain = function (llm) {\n  let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    prompt = DEFAULT_QA_PROMPT,\n    combineMapPrompt = DEFAULT_COMBINE_QA_PROMPT,\n    combinePrompt = COMBINE_PROMPT,\n    type = \"stuff\"\n  } = params;\n  if (type === \"stuff\") {\n    const llmChain = new LLMChain({\n      prompt,\n      llm\n    });\n    const chain = new StuffDocumentsChain({\n      llmChain\n    });\n    return chain;\n  }\n  if (type === \"map_reduce\") {\n    const llmChain = new LLMChain({\n      prompt: combineMapPrompt,\n      llm\n    });\n    const combineLLMChain = new LLMChain({\n      prompt: combinePrompt,\n      llm\n    });\n    const combineDocumentChain = new StuffDocumentsChain({\n      llmChain: combineLLMChain,\n      documentVariableName: \"summaries\"\n    });\n    const chain = new MapReduceDocumentsChain({\n      llmChain,\n      combineDocumentChain\n    });\n    return chain;\n  }\n  throw new Error(`Invalid _type: ${type}`);\n};\nexport const loadQAStuffChain = function (llm) {\n  let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    prompt = QA_PROMPT_SELECTOR.getPrompt(llm)\n  } = params;\n  const llmChain = new LLMChain({\n    prompt,\n    llm\n  });\n  const chain = new StuffDocumentsChain({\n    llmChain\n  });\n  return chain;\n};\nexport const loadQAMapReduceChain = function (llm) {\n  let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    combineMapPrompt = COMBINE_QA_PROMPT_SELECTOR.getPrompt(llm),\n    combinePrompt = COMBINE_PROMPT_SELECTOR.getPrompt(llm)\n  } = params;\n  const llmChain = new LLMChain({\n    prompt: combineMapPrompt,\n    llm\n  });\n  const combineLLMChain = new LLMChain({\n    prompt: combinePrompt,\n    llm\n  });\n  const combineDocumentChain = new StuffDocumentsChain({\n    llmChain: combineLLMChain,\n    documentVariableName: \"summaries\"\n  });\n  const chain = new MapReduceDocumentsChain({\n    llmChain,\n    combineDocumentChain\n  });\n  return chain;\n};","map":{"version":3,"names":["LLMChain","StuffDocumentsChain","MapReduceDocumentsChain","QA_PROMPT_SELECTOR","DEFAULT_QA_PROMPT","COMBINE_PROMPT","DEFAULT_COMBINE_QA_PROMPT","COMBINE_PROMPT_SELECTOR","COMBINE_QA_PROMPT_SELECTOR","loadQAChain","llm","params","arguments","length","undefined","prompt","combineMapPrompt","combinePrompt","type","llmChain","chain","combineLLMChain","combineDocumentChain","documentVariableName","Error","loadQAStuffChain","getPrompt","loadQAMapReduceChain"],"sources":["/Users/b/Code/langchainjs/langchain/dist/chains/question_answering/load.js"],"sourcesContent":["import { LLMChain } from \"../llm_chain.js\";\nimport { StuffDocumentsChain, MapReduceDocumentsChain, } from \"../combine_docs_chain.js\";\nimport { QA_PROMPT_SELECTOR, DEFAULT_QA_PROMPT } from \"./stuff_prompts.js\";\nimport { COMBINE_PROMPT, DEFAULT_COMBINE_QA_PROMPT, COMBINE_PROMPT_SELECTOR, COMBINE_QA_PROMPT_SELECTOR, } from \"./map_reduce_prompts.js\";\nexport const loadQAChain = (llm, params = {}) => {\n    const { prompt = DEFAULT_QA_PROMPT, combineMapPrompt = DEFAULT_COMBINE_QA_PROMPT, combinePrompt = COMBINE_PROMPT, type = \"stuff\", } = params;\n    if (type === \"stuff\") {\n        const llmChain = new LLMChain({ prompt, llm });\n        const chain = new StuffDocumentsChain({ llmChain });\n        return chain;\n    }\n    if (type === \"map_reduce\") {\n        const llmChain = new LLMChain({ prompt: combineMapPrompt, llm });\n        const combineLLMChain = new LLMChain({ prompt: combinePrompt, llm });\n        const combineDocumentChain = new StuffDocumentsChain({\n            llmChain: combineLLMChain,\n            documentVariableName: \"summaries\",\n        });\n        const chain = new MapReduceDocumentsChain({\n            llmChain,\n            combineDocumentChain,\n        });\n        return chain;\n    }\n    throw new Error(`Invalid _type: ${type}`);\n};\nexport const loadQAStuffChain = (llm, params = {}) => {\n    const { prompt = QA_PROMPT_SELECTOR.getPrompt(llm) } = params;\n    const llmChain = new LLMChain({ prompt, llm });\n    const chain = new StuffDocumentsChain({ llmChain });\n    return chain;\n};\nexport const loadQAMapReduceChain = (llm, params = {}) => {\n    const { combineMapPrompt = COMBINE_QA_PROMPT_SELECTOR.getPrompt(llm), combinePrompt = COMBINE_PROMPT_SELECTOR.getPrompt(llm), } = params;\n    const llmChain = new LLMChain({ prompt: combineMapPrompt, llm });\n    const combineLLMChain = new LLMChain({ prompt: combinePrompt, llm });\n    const combineDocumentChain = new StuffDocumentsChain({\n        llmChain: combineLLMChain,\n        documentVariableName: \"summaries\",\n    });\n    const chain = new MapReduceDocumentsChain({\n        llmChain,\n        combineDocumentChain,\n    });\n    return chain;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}