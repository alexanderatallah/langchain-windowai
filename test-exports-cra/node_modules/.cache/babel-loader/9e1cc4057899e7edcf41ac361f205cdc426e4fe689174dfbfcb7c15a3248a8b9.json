{"ast":null,"code":"import { LLMChain } from \"../llm_chain.js\";\nimport { StuffDocumentsChain, MapReduceDocumentsChain } from \"../combine_docs_chain.js\";\nimport { DEFAULT_PROMPT } from \"./stuff_prompts.js\";\nexport const loadSummarizationChain = function (llm) {\n  let params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  const {\n    prompt = DEFAULT_PROMPT,\n    combineMapPrompt = DEFAULT_PROMPT,\n    combinePrompt = DEFAULT_PROMPT,\n    type = \"map_reduce\"\n  } = params;\n  if (type === \"stuff\") {\n    const llmChain = new LLMChain({\n      prompt,\n      llm\n    });\n    const chain = new StuffDocumentsChain({\n      llmChain,\n      documentVariableName: \"text\"\n    });\n    return chain;\n  }\n  if (type === \"map_reduce\") {\n    const llmChain = new LLMChain({\n      prompt: combineMapPrompt,\n      llm\n    });\n    const combineLLMChain = new LLMChain({\n      prompt: combinePrompt,\n      llm\n    });\n    const combineDocumentChain = new StuffDocumentsChain({\n      llmChain: combineLLMChain,\n      documentVariableName: \"text\"\n    });\n    const chain = new MapReduceDocumentsChain({\n      llmChain,\n      combineDocumentChain,\n      documentVariableName: \"text\"\n    });\n    return chain;\n  }\n  throw new Error(`Invalid _type: ${type}`);\n};","map":{"version":3,"names":["LLMChain","StuffDocumentsChain","MapReduceDocumentsChain","DEFAULT_PROMPT","loadSummarizationChain","llm","params","arguments","length","undefined","prompt","combineMapPrompt","combinePrompt","type","llmChain","chain","documentVariableName","combineLLMChain","combineDocumentChain","Error"],"sources":["/Users/b/Code/langchainjs/langchain/dist/chains/summarization/load.js"],"sourcesContent":["import { LLMChain } from \"../llm_chain.js\";\nimport { StuffDocumentsChain, MapReduceDocumentsChain, } from \"../combine_docs_chain.js\";\nimport { DEFAULT_PROMPT } from \"./stuff_prompts.js\";\nexport const loadSummarizationChain = (llm, params = {}) => {\n    const { prompt = DEFAULT_PROMPT, combineMapPrompt = DEFAULT_PROMPT, combinePrompt = DEFAULT_PROMPT, type = \"map_reduce\", } = params;\n    if (type === \"stuff\") {\n        const llmChain = new LLMChain({ prompt, llm });\n        const chain = new StuffDocumentsChain({\n            llmChain,\n            documentVariableName: \"text\",\n        });\n        return chain;\n    }\n    if (type === \"map_reduce\") {\n        const llmChain = new LLMChain({ prompt: combineMapPrompt, llm });\n        const combineLLMChain = new LLMChain({ prompt: combinePrompt, llm });\n        const combineDocumentChain = new StuffDocumentsChain({\n            llmChain: combineLLMChain,\n            documentVariableName: \"text\",\n        });\n        const chain = new MapReduceDocumentsChain({\n            llmChain,\n            combineDocumentChain,\n            documentVariableName: \"text\",\n        });\n        return chain;\n    }\n    throw new Error(`Invalid _type: ${type}`);\n};\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,iBAAiB;AAC1C,SAASC,mBAAmB,EAAEC,uBAAuB,QAAS,0BAA0B;AACxF,SAASC,cAAc,QAAQ,oBAAoB;AACnD,OAAO,MAAMC,sBAAsB,GAAG,SAAAA,CAACC,GAAG,EAAkB;EAAA,IAAhBC,MAAM,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EACnD,MAAM;IAAEG,MAAM,GAAGP,cAAc;IAAEQ,gBAAgB,GAAGR,cAAc;IAAES,aAAa,GAAGT,cAAc;IAAEU,IAAI,GAAG;EAAc,CAAC,GAAGP,MAAM;EACnI,IAAIO,IAAI,KAAK,OAAO,EAAE;IAClB,MAAMC,QAAQ,GAAG,IAAId,QAAQ,CAAC;MAAEU,MAAM;MAAEL;IAAI,CAAC,CAAC;IAC9C,MAAMU,KAAK,GAAG,IAAId,mBAAmB,CAAC;MAClCa,QAAQ;MACRE,oBAAoB,EAAE;IAC1B,CAAC,CAAC;IACF,OAAOD,KAAK;EAChB;EACA,IAAIF,IAAI,KAAK,YAAY,EAAE;IACvB,MAAMC,QAAQ,GAAG,IAAId,QAAQ,CAAC;MAAEU,MAAM,EAAEC,gBAAgB;MAAEN;IAAI,CAAC,CAAC;IAChE,MAAMY,eAAe,GAAG,IAAIjB,QAAQ,CAAC;MAAEU,MAAM,EAAEE,aAAa;MAAEP;IAAI,CAAC,CAAC;IACpE,MAAMa,oBAAoB,GAAG,IAAIjB,mBAAmB,CAAC;MACjDa,QAAQ,EAAEG,eAAe;MACzBD,oBAAoB,EAAE;IAC1B,CAAC,CAAC;IACF,MAAMD,KAAK,GAAG,IAAIb,uBAAuB,CAAC;MACtCY,QAAQ;MACRI,oBAAoB;MACpBF,oBAAoB,EAAE;IAC1B,CAAC,CAAC;IACF,OAAOD,KAAK;EAChB;EACA,MAAM,IAAII,KAAK,CAAE,kBAAiBN,IAAK,EAAC,CAAC;AAC7C,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}